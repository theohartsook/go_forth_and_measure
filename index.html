
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="api/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.9">
    
    
      
        <title>Go Forth and Measure</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#go-forth-and-measure" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Go Forth and Measure" class="md-header__button md-logo" aria-label="Go Forth and Measure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Go Forth and Measure
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Go Forth and Measure" class="md-nav__button md-logo" aria-label="Go Forth and Measure" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Go Forth and Measure
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="go-forth-and-measure">Go Forth and Measure</h1>
<p>Welcome to the Go Forth and Measure documentation!</p>
<h1 id="see-api-reference-for-detailed-descriptions-of-each-module">See <a href="api/">API Reference</a> for detailed descriptions of each module.</h1>
<h1 id="introduction">Introduction</h1>
<p>This is some code that turns GoPro videos into images with the appropriate tags for structure from motion software.</p>
<h1 id="installation">Installation</h1>
<p>Python, Javascript, ExifTool, and FFmpeg are required.</p>
<h2 id="python">Python</h2>
<ul>
<li>numpy</li>
<li>pandas</li>
</ul>
<h2 id="javascript">Javascript</h2>
<ul>
<li>gopro-telemetry</li>
<li>gpmf-extract</li>
<li>fs</li>
<li>fast-csv</li>
</ul>
<h2 id="exiftool">ExifTool</h2>
<p>Installation information: https://exiftool.org/install.html</p>
<h2 id="ffmpeg">FFmpeg</h2>
<p>Installation information: https://www.ffmpeg.org/download.html </p>
<h1 id="getting-started">Getting started</h1>
<p>GFAM needs video inputs and a JSON settings file to run.</p>
<h2 id="video-inputs">Video inputs</h2>
<p>GFAM has been tested on a HERO9 Black camera. Videos are assumed to be in .MP4 format. You can submit a single .MP4 file or a directory path that contains multiple .MP4 files.</p>
<h2 id="settings">Settings</h2>
<p>You can use this template to configure the JSON settings.</p>
<pre><code>{
    &quot;input_vid&quot;:&quot;/path/to/video&quot;,
    &quot;project_dir&quot;: &quot;/path/to/output&quot;,
    &quot;nth_frame&quot;: 30,
    &quot;js_path&quot;: &quot;/go_forth_and_measure/supplementary_files/telemetry_extraction_hero9.js&quot;,
    &quot;rescale_z&quot;: true,
    &quot;min_z&quot;: none,
    &quot;max_z&quot;: none,
    &quot;ori&quot;: true,
    &quot;sfm&quot;: &quot;RC&quot;,
    &quot;prefix&quot;: &quot;&quot;,
    &quot;north_hem&quot;: true,
    &quot;west_hem&quot;: true,
    &quot;clean_up&quot;: true,
    &quot;config_file&quot;: &quot;/go_forth_and_measure/supplementary_files/pix4d.config&quot;
}
</code></pre>
<h3 id="input_vid">input_vid</h3>
<p>Filepath to video(s) input.</p>
<h3 id="project_dir">project_dir</h3>
<p>Filepath for GFAM outputs. GFAM will make this directory. If you pass a non-empty directory, GFAM will error out.</p>
<h3 id="nth_frame">nth_frame</h3>
<p>GFAM will extract every nth frame from the video. i.e. if your video was recorded at 30 FPS and you select<code>nth_frame=30</code>, GFAM will extract 1 frame per second. </p>
<h3 id="js_path">js_path</h3>
<p>The available GoPro telemetry streams, as well as their formatting and axes conventions, can change between cameras. If you have a different camera, you can use this as a starting point and consult the <a href="https://github.com/gopro/gpmf-parser">GoPro gpmf-parser GitHub</a> to make the appropriate modifications.</p>
<h3 id="rescale_z-min_z-max_z">rescale_z, min_z, max_z</h3>
<p>I have found that the z-axis from the GPS can be quite noisy. If you enable this option GFAM will rescale the z values to be more consistent. If you pass values for <code>min_z</code> and <code>max_z</code> all GPS values will be rescaled to that range. If you don't include those, it will simply all z levels with the mean. I recommend this for relatively flat areas where the elevation change is less than the noise in the GPS.</p>
<h3 id="ori">ori</h3>
<p>If you enable this, GFAM will include the orientation data and format it for the corresponding SfM software. The HERO9 Black does not have a magnetometer, so this telemetry is not as useful as it otherwise would be. When exporting for Pix4D, it will apply roll, pitch, and yaw as extra tags (this requires the config file). The yaw will be relative to the video beginning, not to true north. You can mitigate this by looking directly north when you begin filming, but you won't be able to account for sensor drift over time. When exporting for RealityCapture, it will create a gravity .xmp file for each image that is used to orient the roll and pitch of images.</p>
<h3 id="sfm">sfm</h3>
<p>You can select Pix4D (requires config file) or RealityCapture. If you want to modify this for a different software, you may have to write your own .config file. The orientation axes and metadata tags will be important.</p>
<h3 id="prefix">prefix</h3>
<p>You can provide a prefix for images.</p>
<h3 id="north_hem-west_hem">north_hem, west_hem</h3>
<p>These are used by ExifTool to write the GPS tags. The default values are True for both. Setting them to False switches to the other hemisphere.</p>
<h3 id="clean_up">clean_up</h3>
<p>This is an option to clean up the intermediate outputs created by GFAM and to organize multiple videos into a single directory. I recommend leaving this on for almost all scenarios, however it can be helpful to disable it during troubleshooting.</p>
<h3 id="config_file">config_file</h3>
<p>Non-standard Exif tags will require a .config file. </p>
<h2 id="running-gfam">Running GFAM</h2>
<h3 id="command-line">Command Line</h3>
<p>You can run GFAM from the CLI by running <code>python3 gfam_exec.py -i /path/to/settings.json</code>. This is useful for programmatically processing many videos.</p>
<h3 id="gui">GUI</h3>
<p>You can run GFAM from a GUI by runnning <code>python3 gfam_gui.py</code>. This will allow you to load, createm and save new JSON files. You can also run them from the GUI, which will run <code>gfam_exec.py</code> in the background. I recommend this as a good starting place, especially if you're just processing one or two videos.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>